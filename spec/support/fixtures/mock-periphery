#!/usr/bin/env ruby
# frozen_string_literal: true

# This script is generated by generate-mock-periphery.

def format_equal?(format)
  ARGV.include?("--format=#{format}") || ARGV.each_cons(2).include?(['--format', format.to_s])
end

if format_equal?(:checkstyle)
  puts <<~XML
    <?xml version="1.0" encoding="UTF-8"?>
    <checkstyle version="4.3">
      <file name="#{__dir__}/test/main.swift">
        <error line="1" column="10" severity="warning" message="Protocol &apos;RedundantProtocol&apos; is redundant as it&apos;s never used as an existential type"/>
        <error line="4" column="25" severity="warning" message="Protocol &apos;RedundantProtocol&apos; conformance is redundant"/>
        <error line="4" column="14" severity="warning" message="Class &apos;SomeClass&apos; is declared public, but not used outside of test"/>
        <error line="7" column="14" severity="warning" message="Enum case &apos;unusedCase&apos; is unused"/>
        <error line="10" column="9" severity="warning" message="Property &apos;unusedProperty&apos; is unused"/>
        <error line="11" column="17" severity="warning" message="Property &apos;assignOnlyProperty&apos; is assigned, but never used"/>
        <error line="14" column="17" severity="warning" message="Function &apos;methodWithRedundantPublicAccessibility(_:)&apos; is declared public, but not used outside of test"/>
        <error line="14" column="58" severity="warning" message="Parameter &apos;unusedParameter&apos; is unused"/>
        <error line="19" column="10" severity="warning" message="Function &apos;unusedMethod()&apos; is unused"/>
      </file>
    </checkstyle>
  XML
elsif format_equal?(:json)
  puts <<~JSON
    [
      {
        "accessibility": "internal",
        "attributes": [
        ],
        "hints": [
          "redundantProtocol"
        ],
        "ids": [
          "s:4test17RedundantProtocolP"
        ],
        "kind": "protocol",
        "location": "#{__dir__}/test/main.swift:1:10",
        "modifiers": [
        ],
        "name": "RedundantProtocol"
      },
      {
        "accessibility": "",
        "attributes": [
        ],
        "hints": [
          "redundantConformance"
        ],
        "ids": [
          "s:4test17RedundantProtocolP"
        ],
        "kind": "protocol",
        "location": "#{__dir__}/test/main.swift:4:25",
        "modifiers": [
        ],
        "name": "RedundantProtocol"
      },
      {
        "accessibility": "public",
        "attributes": [
        ],
        "hints": [
          "redundantPublicAccessibility"
        ],
        "ids": [
          "s:4test9SomeClassC"
        ],
        "kind": "class",
        "location": "#{__dir__}/test/main.swift:4:14",
        "modifiers": [
          "public"
        ],
        "name": "SomeClass"
      },
      {
        "accessibility": "internal",
        "attributes": [
        ],
        "hints": [
          "unused"
        ],
        "ids": [
          "s:4test9SomeClassC0B4EnumO10unusedCaseyA2EmF"
        ],
        "kind": "enumelement",
        "location": "#{__dir__}/test/main.swift:7:14",
        "modifiers": [
        ],
        "name": "unusedCase"
      },
      {
        "accessibility": "internal",
        "attributes": [
        ],
        "hints": [
          "unused"
        ],
        "ids": [
          "s:4test9SomeClassC14unusedPropertySivp"
        ],
        "kind": "var.instance",
        "location": "#{__dir__}/test/main.swift:10:9",
        "modifiers": [
        ],
        "name": "unusedProperty"
      },
      {
        "accessibility": "private",
        "attributes": [
        ],
        "hints": [
          "assignOnlyProperty"
        ],
        "ids": [
          "s:4test9SomeClassC18assignOnlyProperty33_9F9099C659B8A128A78BAA9A7C0E0368LLSivp"
        ],
        "kind": "var.instance",
        "location": "#{__dir__}/test/main.swift:11:17",
        "modifiers": [
          "private"
        ],
        "name": "assignOnlyProperty"
      },
      {
        "accessibility": "public",
        "attributes": [
        ],
        "hints": [
          "redundantPublicAccessibility"
        ],
        "ids": [
          "s:4test9SomeClassC38methodWithRedundantPublicAccessibilityyySiF"
        ],
        "kind": "function.method.instance",
        "location": "#{__dir__}/test/main.swift:14:17",
        "modifiers": [
          "public"
        ],
        "name": "methodWithRedundantPublicAccessibility(_:)"
      },
      {
        "accessibility": "internal",
        "attributes": [
        ],
        "hints": [
          "unused"
        ],
        "ids": [
          "methodWithRedundantPublicAccessibility(_ unusedParameter:)-unusedParameter-#{__dir__}/test/main.swift:14:58"
        ],
        "kind": "var.parameter",
        "location": "#{__dir__}/test/main.swift:14:58",
        "modifiers": [
        ],
        "name": "unusedParameter"
      },
      {
        "accessibility": "internal",
        "attributes": [
        ],
        "hints": [
          "unused"
        ],
        "ids": [
          "s:4test9SomeClassC12unusedMethodyyF"
        ],
        "kind": "function.method.instance",
        "location": "#{__dir__}/test/main.swift:19:10",
        "modifiers": [
        ],
        "name": "unusedMethod()"
      }
    ]
  JSON
else
  raise "Neither :json nor :checkstyle format are specified; #{ARGV}"
end
